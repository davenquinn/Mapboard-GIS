$secondary=#32536b //#304e68
$bkg=#261e2d

//$accent=#400C4A
$accent=darken(#a328b4,40%)
$gradient-dest=rgb(52,45,79)
$gradient-light=lighten($gradient-dest,75%)
$gradient-dark=darken($gradient-dest,5%)
$dark-card-base = darken(#36375f,10%)
$card-base = lighten(#36375f,60%)

:root
  --header-font: "Montserrat", Helvetica, sans-serif
  --mono-font: "Source Code Pro", monospace
  --background-color: white //lighten(#161517, 0%)
  --text-color: darken(#354a61, 20%)
  --accent-color: $accent
  --accent-background: alpha($accent, 20%)
  --accent-active: alpha($accent, 10%)
  --header-color: $secondary
  --secondary-color: #666666
  --card-background: linear-gradient(120deg, desaturate(lighten($card-base,30%),20%) 0%, $card-base 100%);
  --card-border: $card-base
  --background-gradient: linear-gradient(120deg, alpha($gradient-light,0) 0%, $gradient-light 100%)
  --purple-color: #544679
  --figure-margin: 1.5em
  --line-height: 1.75


$accent-light=#a328b4
$purple-color=lighten(#5A13CA,40%)

@require "./admonitions"
@require "./comparisons-table"
@require "./version-history"

*
  box-sizing: border-box

a
  color: var(--accent-color)

// Typography
p, ul, ol, li, blockquote
  text-align: justify
  hyphens: auto

code, pre 
  font-family: var(--mono-font)
  line-height 1.2

body
  z-index -10
  background: white
  &.bp3-dark
    --background-color: darken(rgba(34,29,38,1),30%) 
    --text-color: lighten(#354a61, 70%)
    --accent-color: $accent-light 
    --accent-background: alpha($accent-light, 20%)
    --accent-active: alpha($accent-light, 20%)
    --header-color: lighten(#32536b,20%) //lighten($secondary,40%)
    --card-border: darken(#37445a,30%)
    --background-gradient: linear-gradient(120deg, alpha($gradient-dark,0) 0%, $gradient-dark 100%)
    --card-background: linear-gradient(120deg, desaturate(darken($dark-card-base,30%),20%) 0%, $dark-card-base 100%);
    --card-border: $dark-card-base
    background:  darken(rgba(34,29,38,1),30%) // lighten(#161517, 2%) //
  transition: background 0.2s;
  font-family "Merriweather", 'Times New Roman', Times, serif
  line-height var(--line-height)
  //background-color: var(--background-color)
  position relative
  margin 0
  padding 0
  color var(--text-color)

p.caption, figcaption
  line-height 1.25em
  font-size 0.8em
  color var(--secondary-color)
  font-style italic

ul
  padding-left: 1.2em

.underlay
  position fixed
  width 100vw
  height 100vh
  top 0
  left 0
  z-index -5
  background: var(--background-gradient);


.wrap
  padding 2em
  max-width 640px
  margin 0 auto
  min-height 100vh
  display flex
  flex-direction column
  padding-bottom 0em
  //overflow hidden

.main
  flex-grow 1
  display flex
  flex-direction: column
  margin-top: 1em

h1,h2,h3,h4,h5,h6
  font-family: var(--header-font)
  color var(--header-color)
  font-weight: 600

.extra-space
  margin 1em

.centered
  text-align: center

.smaller-text
  font-size 14px
  a.link-button
    font-size 14px


.section-content
  position relative
  h1,h2
    clear: both

  margin=1.5em

  h1:first-child
    line-height 1

figure
  break-inside: avoid
  max-width: 100%
  margin: calc(var(--figure-margin) * 0.2) \
    auto calc(var(--figure-margin) * 0.8)
  &:first-child
    margin-top 0
  img, video
    border-radius 6px
    max-width 100%

  &.no-border img, video
    border none

  &.code-figure
    width 16em
    pre
      font-size 0.8em
      line-height 1.2

figcaption
  text-align center
  hyphens: none

// Changlog images and videos
.version .content figure
  max-width: 300px

footer 
  color var(--secondary-color)
  font-size 0.9em
  padding-top 4em
  font-weight 300
  margin-bottom 2em
  strong
    font-weight 600
  p
    margin-bottom 0
    margin-top 0
    text-align: center

:root
  --page-title-size: calc(min(9vw, 3.5em))
  --header-image-size: calc(min(15vw, 6em))

h1.page-title
  //font-family: "Helvetica Neue", Helvetica, sans-serif
  color var(--purple-color)
  font-weight 400
  font-size: var(--page-title-size)
  margin: 0
  white-space: nowrap
  span.dimmer
    opacity 0.5

.page-title-link
  text-align: center
  display block
  text-decoration: none
  overflow: hidden
  color: var(--text-color)
  position: relative
  line-height 1

header
  display grid
  grid-gap 1em
  align-items: center
  .header-image
    margin 0 auto
    cursor pointer
    height var(--header-image-size)
    width var(--header-image-size)
    overflow: hidden
    img.mapboard-logo
      width 110%
      height 110%
      margin: -5%
  nav
    .spacer
      display none
    ul
      margin: 0
      padding-left: 0
      display: flex
      flex-flow: row wrap
      justify-content: center
      align-items: space-between
      gap: 0.5em
      //margin: 0 -0.5em
    li
      //margin: 0.4em 0.5em
      list-style: none

// Section headers

.section-main
  .section-content
    flex 1
    position relative
    img
      max-width 100%
      border-radius 6px
      border 2px solid var(--accent-background)

.page-link-button
  a.link-button
    min-width: 20em
    font-size 14px
  margin 0.5em 2em 1em
  text-align: center
  &.big
    a.link-button
      font-size inherit

a.link-button svg
  margin-bottom -0.1em

minimal-link-button()
  border-color transparent
  &.active
    border 1.5px solid var(--accent-color)

.link-button.minimal
  minimal-link-button()

nav .parent-link a.link-button
  minimal-link-button()

.section-nav
  margin-bottom: 1em
  .nav-inner
    display: grid
    grid-template-columns: fit-content 1fr
    grid-gap: 0.5em
    .parent-link
      grid-column: 1 / 1
      grid-row: 1 / 1
    ul.nav-main
      display: none
    .next-prev
      display: flex
      flex-flow: row wrap
      grid-column: 2 / 2
      grid-row: 1 / 1
  a.prev-link-button
    .label-text
      display: none

  a.link-button, span.nav-label
    text-align left
    padding 0.2em 0.5em
  .nav-inner>*
    margin-bottom: 0.5em

  ul.nav-main
    list-style: none
    padding-left 0
    justify-content: left 
    display flex
    flex-flow row wrap
    align-items: center
    text-align left
    margin-top: 0
    display: none
    gap: 0.5em
    ul
      border 1.5px solid var(--accent-color)
      border-radius 6px
      list-style: none
      display: flex
      flex-flow: row wrap
      align-items: baseline
      padding-left 0
      li
        &:first-child
          padding-top 0.25em
          a
            font-weight bold
        padding-left: 0
        a.link-button
          minimal-link-button()
        padding 0.25em
        padding-top 0
        margin 0
  span.nav-label
    color: var(--accent-color)
    font-weight 400
    font-style italic
    cursor: default

  .next-prev a.link-button
    minimal-link-button()

 .section-nav, .bottom-links
  a.link-button, span.nav-label
    border-width 1.5px
    font-size 14px

.bottom-links
  margin-top 2em

a.link-button, span.nav-label
  display: block

.next-prev
  display flex
  flex-direction: row
  gap: 0.5em
  .spacer
    flex-grow 1

.next-link-button
  .label-text
    margin-right 0.5em
  
.icon-left-button
  .label-text
    margin-left 0.5em

$grid_margin=1.5em

@require "./larger-screens"

card()
  padding 1.2em;
  border:0.1em solid #000000;
  margin:0 $grid_margin $grid_margin 0;
  border-radius:5px;
  box-sizing: border-box;
  background: var(--card-background)
  //background: linear-gradient(95deg, lighten(#37445a, 60%) 0%, lighten(#2c556b,60%) 100%);

  h1,h2,h3,h4,h5,h6
    margin 0.5em 0 0.7em
    font-family: var(--header-font)
    color var(--text-color)
    font-size 1.5em
    line-height 1em

button.bp3-button
  background-color transparent
  span.bp3-icon
    //transform translateY(2)
    svg
      transform scale(1.3) translateY(1px)
      path
        fill var(--accent-color)

a.link-button, button.bp3-button
  line-height: calc(var(--line-height) * 0.8)
  cursor pointer
  font-size 17px
  text-align: center
  display:inline-block;
  padding: 0.5em 1.2em;
  border:2px solid var(--accent-color);
  color var(--accent-color);
  border-radius:0.3em;
  box-sizing: border-box;
  text-decoration:none;
  font-weight:300;
  text-align:center;
  transition: all 0.2s;
  &.active
    background-color: var(--accent-active) !important
  &:hover
    background-color: var(--accent-background);
  strong
    font-weight 600

.callout
  //card()
  //border 2px solid var(--card-border)
  //flex-grow 1
  //font-size 0.9em
  //line-height 1.5em
  // margin-bottom 2em
  // h1, h2, h3
  //   margin-top 0
  p
    text-align left

  h1,h2,h3
    margin-top: 0

  video
    width 300px
    max-width 100%
    border-radius 6px
    display block
    margin: 1em auto

.figure-panel
  column-count 2
  column-gap 1em
  margin: 0 auto
  width: fit-content
  //display: grid
  //grid-template-columns: min-content auto


.manifesto
  margin 1em 1.5em
  font-size 1.5em
  .manifesto-text
    flex-grow 1
    line-height 1.5em
    p
      hyphens: none
  p
    margin 0
    font-weight 300
    text-align: center
    font-style italic
  a.manifesto-link
    font-size 1em
    display inline-block
    min-width 300px
  p.caption
    font-size 16px
    margin-bottom 0
    margin-top 0.5em
  .buttons
    max-width 24em
    margin 1em auto
    text-align center
    padding-top: 1em
    *
      text-align center
//@media screen and (max-width 700px)

div.get-app
  text-align center
  margin 2em 0
  a.link-button
    font-size 1.8em

// 404 page

div.mountain-underlay
  overflow-y hidden
  border-radius 20px
  border 4px solid var(--purple-color)
  flex-grow 1
  width 100%
  min-height:400px
  position relative
  margin 0
  img
    position absolute
    bottom 0
    left 0
    width 100%
    //filter: brightness(1.5) saturate(0.8)

:root
  --figure-margin: 1.5em

